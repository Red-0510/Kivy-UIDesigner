<LayoutManager>:
    layout_button:_layout_button
    BoxLayout:
        drawing_area:_drawing_area
        add_button:_add_button
        orientation:'vertical'
        DrawingSpace:
            size_hint:1,1
            id:_drawing_area
            canvas:
                Color:
                    rgba:1,1,1,1
                Rectangle:
                    pos:0,0
                    size:self.size
                Color:
                    rgba:0,0,0,1
                Line:
                    rectangle:0,0,self.width-2,self.height-2
        Add_Button:
            # text:'Add Layout'
            # pos_hint:{'center_x':.5,'center_y':.5}
            size_hint:1,.2
            id:_add_button
            canvas:
                Line:
                    rectangle:0,0,self.width-2,self.height-2
        BoxLayout:
            orientation:'horizontal'
            size_hint:1,.1
            Button:
                size_hint:.5,1
                id:_layout_button
                text:"Done"
                font_size:'25sp'
                on_press:_drawing_area.go_to_App_Screen(self)
            Button:
                size_hint:.5,1
                id:_save_layout
                font_size:'25sp'
                text:"Save Layout"
                on_press:_drawing_area.save_layout(self)
            Button:
                size_hint:.5,1
                id:_Open_layout
                font_size:'25sp'
                text:"Open Layout"
                on_press:_drawing_area.open_layout(self)
<Add_Button>:
    name:_name
    type:_type
    args:_args
    button:_add_button
    parent_object:_parent
    delete_button:_delete_button
    BoxLayout:
        orientation:'vertical'
        BoxLayout:
            orientation:'horizontal'
            canvas:
                Line:
                    rectangle:0,0,self.width-2,self.height-2
            Label:
                text:"Name"
            TextInput:
                id:_name
                # rowheight_force_default:True
                multiline:False
                text:''
            Label:
                text:"Parent"
            TextInput:
                id:_parent
                multiline:False
                text:''
            Label:
                text:"type"
            TextInput:
                id:_type
                # rowheight_force_default:True
                multiline:False
                text:''
        BoxLayout:
            orientation:'horizontal'
            Label:
                text:'Arguments'
                size_hint:0.3,1
            TextInput:
                id:_args
                multiline:True
                text:''
        BoxLayout:
            orientation:'horizontal'
            ToggleButton:
                id:_add_button 
                text:'Add Element'
                size_hint:0.5,1
            Button:
                id:_delete_button
                text:"Delete Previous widget"
                size_hint:0.5,1
                on_press:root.parent.drawing_area.delete_widget(self)

<App_Screen>:
    background:_background
    BoxLayout:
        orientation:'vertical'
        RelativeLayout:
            id:_background
            canvas:
                Line:
                    rectangle:0,0,self.width-2,self.height-2
                Color:
                    rgba:1,1,1,1
                Rectangle:
                    size:self.size
                    pos:0,0
        Button:
            id:_change_layout
            font_size:'30sp'
            bold:True
            text:"Change Layout"
            size_hint:.7,.1
            pos_hint:{'center_x':.5}
            on_press:root.change_layout(self)

<Item_Data>:
    orientation:'horizontal'
    size_hint:1,None
    height:'25dp'
    item_name:_item_name
    quantity:_quantity
    rate:_rate
    total:_total
    TextInput:
        id:_item_name
        multiline:False
        size_hint:.65,1
        on_text:root.update(self,'item_name')
    TextInput:
        size_hint:.27,1
        id:_quantity
        multiline:False
        on_text:root.update(self,'quantity')
    TextInput:
        size_hint:.26,1
        id:_rate
        multiline:False
        on_text:root.update(self,'rate')
    Label:
        id:_total
        font_size:'15sp'
        color:0,0,0,1
        size_hint:.23,1
        canvas:
            Color:
                rgba:0,0,0,1
            Line:
                rectangle:self.pos[0],self.pos[1],self.size[0],self.size[1]
StackLayout:
    canvas.after:
        Color:
            rgba:1,0,0,1
        Rectangle:
            size:self.size
            pos:self.pos
    
